<!DOCTYPE html>
<html>

<body>

	<input type="text" id="input" value="Sua senha">
	<button onclick="entrar();">Hash</button>

	<script>

		function setCookie(name, value) {
			document.cookie = name + "=" + value;
		}

		function getCookie(name) {
			const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
			return cookieValue ? cookieValue.pop() : '';
		}

		function hash(string) {
		  const utf8 = new TextEncoder().encode(string);
		  return crypto.subtle.digest('SHA-256', utf8).then((hashBuffer) => {
			const hashArray = Array.from(new Uint8Array(hashBuffer));
			const hashHex = hashArray.map(bytes => bytes.toString(16).padStart(2, '0')).join('');
			return hashHex;
		  });
		}

		function entrar() {
			var frase = document.getElementById('input').value;

			hash(frase).then((result) => {
				hashResult = result;
				if (hashResult === "20264a9d385ebd31243b85647adbb293b4770f7ceda7d9a64828939e3e255bc0") {
					setCookie("c", frase);
					window.location.href = "/principal-v.html";
				} else if (hashResult === "6baa2eb3b9aa2426a956ddd4aae3211a013279f52815e9a758556c8c8d0f8d20") {
					setCookie("c", frase);
					window.location.href = "/principal.html";
				
				} else {
					alert("Senha incorreta");
				}
			}).catch(console.error);
		}

		hash(getCookie("c")).then((result) => {
			hashResult = result;
			if (hashResult === "20264a9d385ebd31243b85647adbb293b4770f7ceda7d9a64828939e3e255bc0") {
				window.location.href = "/principal-v.html";
			} else if (hashResult === "6baa2eb3b9aa2426a956ddd4aae3211a013279f52815e9a758556c8c8d0f8d20") {
				window.location.href = "/principal.html";
			}
		}).catch(console.error);

		</script>
</body>

</html>