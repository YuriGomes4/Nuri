<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Nossa história</title>
	<link href="style.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/index.css" rel="stylesheet" type="text/css" />
	  
	<link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">

	<link href='https://fonts.googleapis.com/css?family=Reenie+Beanie|Shantell+Sans|Kavoon' rel='stylesheet' type='text/css'>
</head>

<body style="background-color: rgb(0, 7, 15);; height: 100vh;">

	<div class="fundo"></div>

	<div class="principal-div">

		<p class="titulo-codigo">Código de acesso</p>
		<input class="input-p" type="password" id="input" placeholder="Código">
		<div class="bt-entrar" onclick="entrar()">
			<p>Entrar</p>
		</div>

	</div>

	<script>

		// Fazer o enter executar a função entrar

		document.getElementById("input").addEventListener("keyup", function(event) {
			if (event.keyCode === 13) {
				event.preventDefault();
				entrar();
			}
		});

		function setCookie(name, value) {
			document.cookie = name + "=" + value;
		}

		function getCookie(name) {
			const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
			return cookieValue ? cookieValue.pop() : '';
		}

		function hash(string) {
		  const utf8 = new TextEncoder().encode(string);
		  return crypto.subtle.digest('SHA-256', utf8).then((hashBuffer) => {
			const hashArray = Array.from(new Uint8Array(hashBuffer));
			const hashHex = hashArray.map(bytes => bytes.toString(16).padStart(2, '0')).join('');
			return hashHex;
		  });
		}

		function entrar() {
			var frase = document.getElementById('input').value;

			hash(frase).then((result) => {
				hashResult = result;
				if (hashResult === "20264a9d385ebd31243b85647adbb293b4770f7ceda7d9a64828939e3e255bc0") {
					setCookie("c", frase);
					window.location.href = "/principal-v.html";
				} else if (hashResult === "6baa2eb3b9aa2426a956ddd4aae3211a013279f52815e9a758556c8c8d0f8d20") {
					setCookie("c", frase);
					window.location.href = "/principal.html";
				
				} else if (hashResult === "800baa198cb07db333031b0ea984b7d99e8a610619f8f0477f6f74e5e35faff1") {
					setCookie("c", frase);
					window.location.href = "/max/home.html";

				} else if (hashResult === "170fa7ffb268f11e4f2883d893958b49f59fcb36381e4d7b34156a6b7856c169") {
					setCookie("c", frase);
					window.location.href = "/max/home.html";

				} else {
					alert("Senha incorreta");
				}
			}).catch(console.error);
		}

		hash(getCookie("c")).then((result) => {
			hashResult = result;
			if (hashResult === "20264a9d385ebd31243b85647adbb293b4770f7ceda7d9a64828939e3e255bc0") {
				window.location.href = "/principal-v.html";
			} else if (hashResult === "6baa2eb3b9aa2426a956ddd4aae3211a013279f52815e9a758556c8c8d0f8d20") {
				window.location.href = "/principal.html";
			} else if (hashResult === "800baa198cb07db333031b0ea984b7d99e8a610619f8f0477f6f74e5e35faff1") {
				window.location.href = "/max/home.html";
			} else if (hashResult === "170fa7ffb268f11e4f2883d893958b49f59fcb36381e4d7b34156a6b7856c169") {
				window.location.href = "/max/home.html";
			}
		}).catch(console.error);

		</script>
</body>

</html>